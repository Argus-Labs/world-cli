version: '3'

silent: true

tasks:
  default:
    desc: Run all tests
    cmds:
      - go test ./...

  coverage:
    desc: Run tests with coverage reporting
    cmds:
      - |
        {{if eq OS "windows"}}
          go test ./... -coverprofile=coverage-%CD:~-8%.out -covermode=count -v
        {{else}}
          go test ./... -coverprofile=coverage-$(basename $(pwd)).out -covermode=count -v
        {{end}}
